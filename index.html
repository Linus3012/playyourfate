<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Play Your Fate</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --bg: #05060a;
      --card-bg: #10121a;
      --accent: #a855f7;
      --accent-soft: rgba(168, 85, 247, 0.25);
      --text-main: #f9fafb;
      --text-muted: #9ca3af;
      --border-subtle: #1f2933;
      --error: #f87171;
      --radius-lg: 18px;
      --radius-xl: 26px;
      --shadow-soft: 0 18px 45px rgba(0,0,0,0.6);
    }

    /* wichtig f√ºr die R√§nder */
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: radial-gradient(circle at top, #1f2937 0, #05060a 55%);
    }

    body {
      min-height: 100dvh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: system-ui, sans-serif;
      color: var(--text-main);
      text-align: center;
      padding: 20px;
      overflow-x: hidden;
    }

    .container {
      width: 100%;
      max-width: 500px;
    }

    .card {
      background: linear-gradient(145deg, #0c0e16, #05060a 60%, #111827);
      border-radius: var(--radius-xl);
      padding: 30px 24px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(148, 163, 184, 0.15);
      position: relative;
    }

    h1 {
      margin: 10px 0 5px;
      font-size: 26px;
    }

    .subtitle {
      color: var(--text-muted);
      font-size: 14px;
      margin-bottom: 22px;
    }

    .pill-row {
      display: flex;
      gap: 7px;
      flex-wrap: wrap;
      margin-bottom: 22px;
      justify-content: center;
    }

    .pill {
      padding: 5px 10px;
      border: 1px solid rgba(148,163,184,0.25);
      border-radius: 999px;
      font-size: 11px;
      color: var(--text-muted);
    }

    .input-section {
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148,163,184,0.15);
      padding: 18px;
      border-radius: var(--radius-lg);
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 12px;
      align-items: center;
    }

    input {
      padding: 10px 14px;
      width: 100%;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.3);
      background: #020617;
      color: var(--text-main);
      font-size: 15px;
    }

    input:focus {
      border-color: var(--accent);
      outline: none;
      box-shadow: 0 0 0 2px rgba(168,85,247,0.25);
    }

    button {
      border: none;
      background: var(--accent);
      color: white;
      padding: 12px 18px;
      font-weight: bold;
      border-radius: 999px;
      cursor: pointer;
      box-shadow: 0 10px 22px rgba(168,85,247,0.45);
      transition: 0.15s;
      white-space: nowrap;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 15px 28px rgba(168,85,247,0.55);
    }

    button:active {
      transform: translateY(0);
    }

    .error {
      color: var(--error);
      margin-top: 12px;
      font-size: 14px;
    }

    .result {
      margin-top: 22px;
      background: radial-gradient(circle at top right, var(--accent-soft), rgba(15,23,42,0.9));
      border: 1px solid rgba(148,163,184,0.25);
      padding: 18px;
      border-radius: var(--radius-lg);
      text-align: left;
    }

    .result-text {
      font-size: 17px;
      margin-bottom: 8px;
    }

    .result-meta {
      color: var(--text-muted);
      font-size: 13px;
    }

    .tags {
      margin-top: 8px;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .tag {
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.4);
      font-size: 11px;
      color: var(--text-muted);
    }

    /* üîß Mobile-Optimierung */
    @media (max-width: 480px) {
      body {
        padding: 12px 10px;
      }

      .card {
        padding: 22px 16px;
        border-radius: 20px;
      }

      h1 {
        font-size: 22px;
      }

      .subtitle {
        font-size: 13px;
      }

      .input-section {
        grid-template-columns: 1fr;
      }

      button {
        width: 100%;
      }
    }

  </style>
</head>


<body>
<div class="container">
  <div class="card">

    <h1>Play Your Fate</h1>
    <p class="subtitle">Eine gezogene Karte ‚Äì eine klare Empfehlung.</p>

    <div class="pill-row">
      <div class="pill">‚ù§Ô∏è Herz ¬∑ Beziehungen</div>
      <div class="pill">‚úö Kreuz ¬∑ Logik & Analyse</div>
      <div class="pill">üî± Schaufel ¬∑ Entscheidungen</div>
      <div class="pill">‚ô¶Ô∏è Ecken ¬∑ Action & Umsetzung</div>
    </div>

    <div class="input-section">
      <input id="kartenInput" placeholder="z. B.: herz-7, kreuz-ass, ecken-9">
      <button id="btnStart">Fate</button>
    </div>

    <div id="errorBox" class="error" style="display:none;"></div>

    <div id="resultBox" class="result" style="display:none;">
      <div id="resultText" class="result-text"></div>
      <div id="resultMeta" class="result-meta"></div>
      <div id="tagList" class="tags"></div>
    </div>

  </div>
</div>


<script>
function getParameter(name) {
  const params = new URLSearchParams(window.location.search);
  return params.get(name);
}

function parseCard(raw) {
  const parts = raw.toLowerCase().trim().split("-");
  if (parts.length !== 2) return null;

  const farbe = parts[0];
  const wert = parts[1];

  const erlaubteFarben = ["herz", "kreuz", "schaufel", "ecken"];
  const erlaubteWerte = ["6","7","8","9","10","unter","ober","koenig","ass"];

  if (!erlaubteFarben.includes(farbe)) return null;
  if (!erlaubteWerte.includes(wert)) return null;

  return { farbe, wert };
}

function generateFateOffline(card) {
  const themen = {
    herz: "Beziehungen & Menschen",
    kreuz: "Herausforderungen & Logik",
    schaufel: "Entscheidungen & Verantwortung",
    ecken: "Action & Umsetzung"
  };

  const texte = {
    herz: [
      "Sprich direkt aus, was du meinst.",
      "Kurze R√ºckmeldung reicht v√∂llig.",
      "Ein kleiner Kontakt l√∂st viel.",
      "Heute helfen klare Worte."
    ],
    kreuz: [
      "Sortiere erst, handle dann.",
      "Ein Mini-Plan reicht f√ºr heute.",
      "Bleib sachlich, das hilft.",
      "Nicht √ºberdenken ‚Äì strukturieren."
    ],
    schaufel: [
      "Triff eine Entscheidung und geh weiter.",
      "Ein ‚ÄûNein‚Äú spart Energie.",
      "Halte deinen Fokus eng.",
      "Heute z√§hlt Klarheit."
    ],
    ecken: [
      "Starte einfach ‚Äì sofort.",
      "Mach‚Äôs kurz und pragmatisch.",
      "Kleine Schritte reichen.",
      "Erledige 1-Minuten-Aufgaben direkt."
    ]
  };

  const hohe = ["10","ober","koenig","ass"];
  const niedrige = ["6","7"];

  let intensit√§t = "mittel";
  if (hohe.includes(card.wert)) intensit√§t = "hoch";
  if (niedrige.includes(card.wert)) intensit√§t = "leicht";

  const intros = {
    leicht: ["Hinweis:", "Kurz:", "Tipp:"],
    mittel: ["Einsch√§tzung:", "Empfehlung:", "Kurzfassung:"],
    hoch: ["Klarer Hinweis:", "Wichtiger Punkt:", "Direkt:"]
  };

  const outros = {
    leicht: ["Reicht so.", "Mehr brauchst du nicht.", "Gut f√ºr heute."],
    mittel: ["Passt gut.", "Klingt sinnvoll.", "Gute Linie."],
    hoch: ["Mach das zuerst.", "Priorit√§t!", "Das f√ºhrt dich weiter."]
  };

  function pick(a) {
    return a[Math.floor(Math.random() * a.length)];
  }

  const thema = themen[card.farbe];
  const text = pick(intros[intensit√§t]) + " " + pick(texte[card.farbe]) + " " + pick(outros[intensit√§t]);

  return {
    ok: true,
    main: text,
    meta: `Karte: ${card.farbe.toUpperCase()} ¬∑ ${card.wert.toUpperCase()} ¬∑ Thema: ${thema}`,
    tags: [
      `Intensit√§t: ${intensit√§t}`,
      `Thema: ${thema}`
    ]
  };
}

function showResult(res) {
  const box = document.getElementById("resultBox");
  const text = document.getElementById("resultText");
  const meta = document.getElementById("resultMeta");
  const tags = document.getElementById("tagList");

  text.textContent = res.main;
  meta.textContent = res.meta;

  tags.innerHTML = "";
  res.tags.forEach(t => {
    const span = document.createElement("span");
    span.className = "tag";
    span.textContent = t;
    tags.appendChild(span);
  });

  box.style.display = "block";
}

function showError(msg) {
  const e = document.getElementById("errorBox");
  e.textContent = msg;
  e.style.display = "block";
  document.getElementById("resultBox").style.display = "none";
}

function hideError() {
  document.getElementById("errorBox").style.display = "none";
}

function runFate() {
  hideError();

  const input = document.getElementById("kartenInput").value.trim();
  const card = parseCard(input);

  if (!card) {
    showError("Bitte gib eine g√ºltige Karte ein ‚Äì z. B. ‚Äûherz-8‚Äú, ‚Äûkreuz-ass‚Äú, ‚Äûecken-9‚Äú.");
    return;
  }

  const result = generateFateOffline(card);
  showResult(result);
}

// Button + Enter-Taste
document.getElementById("btnStart").addEventListener("click", runFate);
document.getElementById("kartenInput").addEventListener("keydown", (e) => {
  if (e.key === "Enter") runFate();
});

// QR-Parameter √ºbernehmen ‚Üí ?karte=ecken-9
const qCard = getParameter("karte");
if (qCard) {
  document.getElementById("kartenInput").value = qCard;
}
</script>

</body>
</html>
